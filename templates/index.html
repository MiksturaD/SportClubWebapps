<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –∫–ª—É–± –¢–∞–π–∏–∫—É</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –∫–ª—É–± –¢–∞–π–∏–∫—É</h1>
            <img src="{{ url_for('static', filename='img/logo.png') }}" alt="–õ–æ–≥–æ—Ç–∏–ø –∫–ª—É–±–∞" style="max-width: 100px; margin-bottom: 10px;">
            <p>–†–∞–∑–≤–∏—Ç–∏–µ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ –∏ –∑–¥–æ—Ä–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞ –∂–∏–∑–Ω–∏</p>
        </div>

        <!-- –°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã -->
        <div class="sport-groups" id="sportGroups">
            <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –≥—Ä—É–ø–ø...</div>
        </div>

        <!-- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="user-panel" id="adminPanel" style="display: none;">
            <h2>üë®‚Äçüíº –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å</h2>
            <div class="panel-grid">
                <button class="panel-btn" onclick="showModal('participantsModal')">
                    üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏
                </button>
                <button class="panel-btn" onclick="showModal('paymentsModal')">
                    üí∞ –ü–ª–∞—Ç–µ–∂–∏
                </button>
                <button class="panel-btn" onclick="showModal('attendanceModal')">
                    üìä –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å
                </button>
                <button class="panel-btn" onclick="showModal('discountsModal')">
                    üé´ –ê–∫—Ü–∏–∏
                </button>
                <button class="panel-btn" onclick="checkLowBalance()">
                    ‚ö†Ô∏è –ë–∞–ª–∞–Ω—Å—ã
                </button>
                <button class="panel-btn secondary" onclick="updateSportGroups()">
                    üîÑ –û–±–Ω–æ–≤–∏—Ç—å –≥—Ä—É–ø–ø—ã
                </button>
                <button class="panel-btn secondary" onclick="resetSportGroups()">
                    üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å –≥—Ä—É–ø–ø—ã
                </button>
            </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π -->
        <div class="user-panel" id="parentPanel" style="display: none;">
            <h2>üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
            <div class="panel-grid">
                <button class="panel-btn" onclick="showModal('authorizationModal')">
                    üîê –ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã
                </button>
                <button class="panel-btn" onclick="showModal('paymentModal')" id="paymentBtn" style="display: none;">
                    üí≥ –û–ø–ª–∞—Ç–∞
                </button>
                <button class="panel-btn" onclick="showModal('parentAttendanceModal')" id="attendanceBtn" style="display: none;">
                    üìä –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å
                </button>
                <button class="panel-btn secondary" onclick="openContacts()">
                    üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã
                </button>
                <button class="panel-btn secondary" onclick="showModal('discountsModal')">
                    üé´ –ê–∫—Ü–∏–∏
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ -->
    <div class="modal" id="participantsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</h3>
                <button class="close-btn" onclick="closeModal('participantsModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="participantForm">
                    <div class="form-group">
                        <label for="fullName">–§–ò–û —É—á–∞—Å—Ç–Ω–∏–∫–∞</label>
                        <input type="text" id="fullName" required placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω–æ–µ –∏–º—è">
                    </div>
                    <div class="form-group">
                        <label for="parentPhone">–¢–µ–ª–µ—Ñ–æ–Ω —Ä–æ–¥–∏—Ç–µ–ª—è</label>
                        <input type="tel" id="parentPhone" required placeholder="+7 (999) 123-45-67">
                    </div>
                    <div class="form-group">
                        <label for="birthDate">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                        <input type="date" id="birthDate" required>
                    </div>
                    <div class="form-group">
                        <label for="participantGroup">–ì—Ä—É–ø–ø–∞ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</label>
                        <select id="participantGroup" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="medicalCertificate" style="width: auto; margin-right: 8px;">
                            –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="discountType">–¢–∏–ø —Å–∫–∏–¥–∫–∏</label>
                        <select id="discountType">
                            <option value="">–ë–µ–∑ —Å–∫–∏–¥–∫–∏</option>
                            <option value="–°–µ–º–µ–π–Ω–∞—è —Å–∫–∏–¥–∫–∞">–°–µ–º–µ–π–Ω–∞—è —Å–∫–∏–¥–∫–∞</option>
                            <option value="–ú–Ω–æ–≥–æ–¥–µ—Ç–Ω–∞—è —Å–µ–º—å—è">–ú–Ω–æ–≥–æ–¥–µ—Ç–Ω–∞—è —Å–µ–º—å—è</option>
                            <option value="–°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∞—è —Å–∫–∏–¥–∫–∞">–°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∞—è —Å–∫–∏–¥–∫–∞</option>
                            <option value="–°–∫–∏–¥–∫–∞ –∑–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞">–°–∫–∏–¥–∫–∞ –∑–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞</option>
                            <option value="–°–µ–∑–æ–Ω–Ω–∞—è —Å–∫–∏–¥–∫–∞">–°–µ–∑–æ–Ω–Ω–∞—è —Å–∫–∏–¥–∫–∞</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="discountPercent">–ü—Ä–æ—Ü–µ–Ω—Ç —Å–∫–∏–¥–∫–∏</label>
                        <input type="number" id="discountPercent" min="0" max="100" value="0" placeholder="0">
                    </div>
                    <button type="submit" class="btn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
                </form>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è -->
    <div class="modal" id="scheduleModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</h3>
                <button class="close-btn" onclick="closeModal('scheduleModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="scheduleForm">
                    <div class="form-group">
                        <label for="scheduleGroup">–í–∏–¥ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</label>
                        <select id="scheduleGroup" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="dayOfWeek">–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏</label>
                        <select id="dayOfWeek" required>
                            <option value="0">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</option>
                            <option value="1">–í—Ç–æ—Ä–Ω–∏–∫</option>
                            <option value="2">–°—Ä–µ–¥–∞</option>
                            <option value="3">–ß–µ—Ç–≤–µ—Ä–≥</option>
                            <option value="4">–ü—è—Ç–Ω–∏—Ü–∞</option>
                            <option value="5">–°—É–±–±–æ—Ç–∞</option>
                            <option value="6">–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="startTime">–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞</label>
                        <input type="time" id="startTime" required>
                    </div>
                    <div class="form-group">
                        <label for="endTime">–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
                        <input type="time" id="endTime" required>
                    </div>
                    <button type="submit" class="btn">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
                </form>
                <div id="scheduleList" style="margin-top: 24px;">
                    <h4 style="margin-bottom: 16px; color: #ffffff;">–¢–µ–∫—É—â–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:</h4>
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–ª–∞—Ç–µ–∂–µ–π -->
    <div class="modal" id="paymentsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">–°–∏—Å—Ç–µ–º–∞ —É—á–µ—Ç–∞ –æ–ø–ª–∞—Ç—ã</h3>
                <button class="close-btn" onclick="closeModal('paymentsModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="paymentsList">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–∫–∏–¥–æ–∫ -->
    <div class="modal" id="discountsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">–°–∫–∏–¥–∫–∏ –∏ –∞–∫—Ü–∏–∏</h3>
                <button class="close-btn" onclick="closeModal('discountsModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="discountForm">
                    <div class="form-group">
                        <label for="discountName">–ù–∞–∑–≤–∞–Ω–∏–µ –∞–∫—Ü–∏–∏</label>
                        <input type="text" id="discountName" required placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∞–∫—Ü–∏–∏">
                    </div>
                    <div class="form-group">
                        <label for="discountDescription">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea id="discountDescription" required placeholder="–û–ø–∏—à–∏—Ç–µ —É—Å–ª–æ–≤–∏—è –∞–∫—Ü–∏–∏"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="discountTypeSelect">–¢–∏–ø —Å–∫–∏–¥–∫–∏</label>
                        <select id="discountTypeSelect" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
                            <option value="–°–µ–º–µ–π–Ω–∞—è —Å–∫–∏–¥–∫–∞">–°–µ–º–µ–π–Ω–∞—è —Å–∫–∏–¥–∫–∞</option>
                            <option value="–ú–Ω–æ–≥–æ–¥–µ—Ç–Ω–∞—è —Å–µ–º—å—è">–ú–Ω–æ–≥–æ–¥–µ—Ç–Ω–∞—è —Å–µ–º—å—è</option>
                            <option value="–°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∞—è —Å–∫–∏–¥–∫–∞">–°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∞—è —Å–∫–∏–¥–∫–∞</option>
                            <option value="–°–∫–∏–¥–∫–∞ –∑–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞">–°–∫–∏–¥–∫–∞ –∑–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞</option>
                            <option value="–°–µ–∑–æ–Ω–Ω–∞—è —Å–∫–∏–¥–∫–∞">–°–µ–∑–æ–Ω–Ω–∞—è —Å–∫–∏–¥–∫–∞</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="discountPercentInput">–ü—Ä–æ—Ü–µ–Ω—Ç —Å–∫–∏–¥–∫–∏</label>
                        <input type="number" id="discountPercentInput" min="0" max="100" required placeholder="0">
                    </div>
                    <div class="form-group">
                        <label for="discountStartDate">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>
                        <input type="date" id="discountStartDate" required>
                    </div>
                    <div class="form-group">
                        <label for="discountEndDate">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
                        <input type="date" id="discountEndDate" required>
                    </div>
                    <button type="submit" class="btn">–°–æ–∑–¥–∞—Ç—å –∞–∫—Ü–∏—é</button>
                </form>
                <div id="discountsList" style="margin-top: 24px;">
                    <h4 style="margin-bottom: 16px; color: #ffffff;">–ê–∫—Ç–∏–≤–Ω—ã–µ –∞–∫—Ü–∏–∏:</h4>
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ü–∏–π...</div>
                </div>
            </div>
        </div>
    </div>
    

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">–û–ø–ª–∞—Ç–∞ –∑–∞–Ω—è—Ç–∏–π</h3>
                <button class="close-btn" onclick="closeModal('paymentModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="paymentForm">
                    <div class="form-group">
                        <label for="paymentParticipant">–£—á–∞—Å—Ç–Ω–∏–∫</label>
                        <select id="paymentParticipant" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="paymentGroup">–ì—Ä—É–ø–ø–∞</label>
                        <select id="paymentGroup" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="paymentType">–¢–∏–ø –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞</label>
                        <select id="paymentType" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
                            <option value="8 –∑–∞–Ω—è—Ç–∏–π">8 –∑–∞–Ω—è—Ç–∏–π</option>
                            <option value="12 –∑–∞–Ω—è—Ç–∏–π">12 –∑–∞–Ω—è—Ç–∏–π</option>
                            <option value="–†–∞–∑–æ–≤—ã–µ –∑–∞–Ω—è—Ç–∏—è">–†–∞–∑–æ–≤—ã–µ –∑–∞–Ω—è—Ç–∏—è</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="paymentAmount">–°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ</label>
                        <input type="number" id="paymentAmount" required placeholder="0" readonly>
                    </div>
                    <button type="submit" class="btn">–û–ø–ª–∞—Ç–∏—Ç—å</button>
                </form>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ (–∞–¥–º–∏–Ω) -->
    <div class="modal" id="attendanceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üìä –£—á–µ—Ç –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏</h3>
                <button class="close-btn" onclick="closeModal('attendanceModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="attendanceContent">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –≥—Ä—É–ø–ø...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤ (—Ä–æ–¥–∏—Ç–µ–ª—å) -->
    <div class="modal" id="authorizationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üîê –ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã</h3>
                <button class="close-btn" onclick="closeModal('authorizationModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 12px; color: #ffffff;">–î–æ–±–∞–≤–∏—Ç—å –∞–±–æ–Ω–µ–º–µ–Ω—Ç</h4>
                    <p style="color: rgba(255,255,255,0.8); font-size: 14px; margin-bottom: 16px;">
                        –í–≤–µ–¥–∏—Ç–µ 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
                    </p>
                </div>
                <form id="authorizationForm">
                    <div class="form-group">
                        <label for="authCode">–ö–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</label>
                        <input type="text" id="authCode" maxlength="6" placeholder="123456" required>
                    </div>
                    <button type="submit" class="btn">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∞–±–æ–Ω–µ–º–µ–Ω—Ç</button>
                </form>
                <div id="authorizedParticipants" style="margin-top: 24px;">
                    <h4 style="margin-bottom: 12px; color: #ffffff;">–¢–µ–∫—É—â–∏–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ã:</h4>
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ (—Ä–æ–¥–∏—Ç–µ–ª—å) -->
    <div class="modal" id="parentAttendanceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üìä –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å</h3>
                <button class="close-btn" onclick="closeModal('parentAttendanceModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="parentAttendanceContent">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
